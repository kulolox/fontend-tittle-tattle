## 浏览器的渲染过程中可以做到的优化点

### 加载阶段

- 减少关键资源个数

  js、css 采用内联形式，js 无 dom 或 csssom，则可以改成 sync 或 defer

- 减小关键资源大小

  代码压缩，去除注释

- 缩短关键资源的 RTT（Round Trip Time），即从发送端发送数据开始，到发送端接收到来自接收端的确认，总共经历的时间。

  配合使用前两者，使用 cdn 减少 RTT 时长

### 交互阶段

- 避免 DOM 回流。即避免重排和重绘

- 减少 js 脚本执行时间。

  1. 将一次执行的函数分解为多个任务。
  2. 采用 web workers

- DOM 操作相关优化

  1. 缓存一些计算属性，let left = el.offsetLeft
  2. DOM 通过 class 集中改变样式，而不是 style
  3. 分离读写操作。现代浏览器都有渲染队列机制。
  4. 放弃传统操作 dom 时代，采用 react/vue 的 virtual dom 的框架

- 合理利用 css 合成动画，动画能用 css 就用 css

- css 选择器优化

  1. 尽量不要使用通配符
  2. 少用标签选择器
  3. 尽量利用属性继承的特性

- css 属性优化

- 避免频繁的垃圾回收。不要频繁创建临时对象

### 缓存

缓存可以说是性能优化中简单高效的一种优化方式了。

> 详见缓存.md

### DNS 相关优化

一般而言，浏览器解析 DNS 需要 20-120ms，因此 DNS 解析可优化之处几乎没有。但存在这样一个场景，网站有很多图片在不同域名下，那如果在登录页就提前解析了之后可能会用到的域名，使解析结果缓存过，这样缩短了 DNS 解析时间，提高网站整体上的访问速度了，这就是 DNS 预解析。

- 在页面头部添加 dns 预解析

```
<meta http-equiv="x-dns-prefetch-control" content="on">
```

- 通过 link 标签手动添加要解析的域名

```
<link rel="dns-prefetch" href="//img10.360buyimg.com"/>
```
