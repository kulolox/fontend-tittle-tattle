## 虚拟 DOM

### 什么是虚拟 DOM?

虚拟 dom 本质上是 JS 和 DOM 之间的映射缓存，它在形态上表现为一个能够描述 DOM 结构及其属性信息的 JS 对象。

- 虚拟 DOM 是 JS 对象
- 虚拟 DOM 是对真实 DOM 的描述

### 为什么需要虚拟 DOM？

常规的回答是：真实 DOM 的操作很慢，而 JS 却很快，直接操作 DOM 可能会导致频繁的回流与重绘，JS 不存在这些问题。因此虚拟 DOM 比原生 DOM 更快。

### 历史上的 DOM 解决方案

1. 早期人肉 DOM 时期

前端这个工种的萌芽阶段，前端要做的就是展示静态页面，再补充少量 JS,实现一些类似拖拽、隐藏、幻灯片之类的特效。原生 JS 就够用了。

2. jQuery 时期

人们不再满足简单无聊的交互效果，追求更加丰富的体验，DOM 操作需求导致前端工作量激增，让早期的前端明白原生 JS 提供的 DOM API 太难用了。jQuery 首先解决了 API 不好用的问题，同时解决了跨浏览器的兼容工作，解放了生产力，最终的效果是“写的更少，做的更多”

3. 早期模板引擎方案

jQuery 帮助我们能够以更舒服的姿势操作 DOM，但没有解决根本问题，DOM 的操作量过大。所以模板引擎应运而生。使用模板引擎方案来渲染数据是非常爽的：每次数据发生变化时，我们都不用关心到底是哪里的数据变了，也不用手动去点对点完成 DOM 的修改。只需要关注的仅仅是数据和数据变化本身，DOM 层面的改变模板引擎会帮我们做掉。但模板引擎不够智能，性能表现不好。并不能解放生产力。虽然这样，模板引擎还是为我们提供了一种思路，即数据驱动视图。

沿着这个思路往下走就是虚拟 DOM 了。由此可见技术的更迭其实都是为人服务的。

### 我认为的虚拟 DOM

虚拟 dom 不一定比操作真实 dom 要快，我认为虚拟 DOM 解决的关键问题有两个：

- 研发体验/研发效率，数据驱动视图这一思想使得前端开发能够基于函数式 UI 的编程方式实现高效的声明式编程。

- 解决跨平台问题，同一套虚拟 DOM，可以对接不同平台的渲染逻辑，从而实现“一次编码，多端运行”
